<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>用户管理</title>
    <style>
        body { background-color: #F8F9FA; }
        table { width: 80%; margin: 20px auto; border-collapse: collapse; }
        th, td { border: 1px solid #aaa; padding: 8px; text-align: center; }
        th { background-color: #007BFF; color: #fff; } /* 主色蓝色表头 */
        .actions a { margin: 0 5px; color: green; }    /* 辅色绿色的操作链接 */
    </style>
</head>
<body>
<div style="width: 80%; margin: auto;">
    <!-- 导航 -->
    <div style="text-align: right; margin: 10px;">
        <a th:href="@{/knowledge/list}">知识卡管理</a> |
        <a th:href="@{/logout}">退出登录</a>
    </div>

    <h2 style="color: blue; text-align: center;">用户列表</h2>

    <!-- 搜索表单 -->
    <form th:action="@{/user/list}" method="get" style="text-align: center; margin-bottom: 10px;">
        <input type="text" name="nameKeyword" th:value="${nameKeyword}" placeholder="按名称搜索用户" />
        <button type="submit">搜索</button>
    </form>

    <table>
        <tr>
            <th>ID</th><th>用户名</th><th>邮箱</th><th>操作</th>
        </tr>
        <tr th:each="u : ${pageData.records}">
            <td th:text="${u.id}"></td>
            <td th:text="${u.username}"></td>
            <td th:text="${u.email}"></td>
            <td class="actions">
                <a th:href="@{/user/edit(id=${u.id})}">编辑</a>
                <a th:href="@{/user/delete(id=${u.id})}"
                   onclick="return confirm('确认删除该用户吗？');">删除</a>
            </td>
        </tr>
    </table>

    <!-- 分页控制 -->
    <div style="text-align: center; margin: 10px;">
        第 <span th:text="${pageData.current}">1</span> /
        <span th:text="${pageData.pages}">1</span> 页，
        共 <span th:text="${pageData.total}">0</span> 条记录
        <br/>
        <a th:if="${pageData.current>1}"
           th:href="@{/user/list(page=${pageData.current-1}, nameKeyword=${nameKeyword})}">上一页</a>
        <a th:if="${pageData.current < pageData.pages}"
           th:href="@{/user/list(page=${pageData.current+1}, nameKeyword=${nameKeyword})}">下一页</a>
    </div>

    <!-- 新增用户表单 -->
    <h3 style="text-align:center; color: blue;">新增用户</h3>
    <form th:action="@{/user/add}" method="post" style="width: 300px; margin: 0 auto;">
        用户名：<input type="text" name="username" required /> <br/>
        邮箱：<input type="email" name="email" required /> <br/>
        密码：<input type="password" name="password" required /> <br/>
        <button type="submit" class="btn-primary" style="margin-top:5px;">添加用户</button>
    </form>
</div>
</body>
</html>
